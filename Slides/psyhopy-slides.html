<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Workshop: Introduction to PsychoPy</title>
    <meta charset="utf-8" />
    <meta name="author" content="Soh Mei Ling | Chong Kai Hao | Jonathan Choo Kam Kitt" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Workshop: Introduction to PsychoPy
## ‚öî<br/><br/>with Pavlovia
### Soh Mei Ling | Chong Kai Hao | Jonathan Choo Kam Kitt
### University of Nottingham, Malaysia
### 2021/08/19 (updated: 2021-08-13)

---



## Objectives
This workshop will:  

- introduce you all to the basic aspects of the PsychoPy Builder interface

- teach you how to create a simple experiment; the Stroop task

- teach you how to create a perception experiment: the Navon task

- help you launch your first online experiment on Pavlovia

- provide you some resources to go further

---
## Pre-requisite

### Is this workshop suitable for me? 
There is no pre-requisite programming knowledge for this workshop, except some knowledge on how to operate your laptop/desktop. 

- This is **NOT** a programming workshop and you are not asked to know any programming language prior to attending this workshop. 

- We do some coding, and it is very minimum. It is fine if you do not understand the codes. Most of the time, we just _google_ for answer. 

- Due to the limited time, we will NOT be able to cover all aspects of PsychoPy and Pavlovia. We encourage the participants to explore the links that we provide at the end of the workshop for more information. 

---
## What is PsychoPy?

- PsychoPy is an open-source package for running experiments in Python 
(a real and **free** alternative to Matlab) See [advantages of using PsychoPy](https://www.psychopy.org/)

- It has three windows: 
    - A code editor(called ***Coder***)
    - A graphical user interface (called ***Builder***)
    - A console that runs the code (called ***Runner***)

- For beginners, you will spend most of your time at the ***Builder***&lt;sup&gt;1&lt;/sup&gt; view. 

- For those comfortable with programming, you can write Python code on the ***Coder***&lt;sup&gt;2&lt;/sup&gt; view.
You can refer to the [Reference API](https://www.psychopy.org/api/index.html#api) for the details of the dependencies used in the library.


.footnote[
[1] If you are using builder, make sure you are really happy with your ***Builder*** format before moving to coder.

[2] Only use ***Coder*** to fine-tune the experiment. You can compile your experiment into a Python script using the `compile to script` button. The best practice is to use a ***Builder*** to design most part of the experiment and only fine-tuning the experiment using the `Code Component`. 
]


---
class: inverse, center, middle

# Getting Started &lt;br/&gt;&lt;br/&gt;(Basics)
---
## Builder View
.left-column[
***Builder*** has three windows: 
    - Routines
    - Components
    - Flow
]

.right-column[
![](image/builder-view.png)
]

---
## Coder View

.left-column[
***Coder*** has two windows: 
- Integrated Development Environment (IDE)
- Output
]

.right-column[
&lt;img src="image/coder-view.png" width="60%" style="display: block; margin: auto;" /&gt;
]
---
## Experiment Setting

- __Experiment Info__: This information will be presented in a dialog box at the start and will be saved with any data files and so can be used for storing information about the current run of the study.

- __Units__: The default units of the window but these can be overriden by individual components.

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/experiment-setting.gif" alt="Figure. GIF for experiment settings" width="50%" /&gt;
&lt;p class="caption"&gt;Figure. GIF for experiment settings&lt;/p&gt;
&lt;/div&gt;

---
layout: true

## The Toolbar

---

- The first few icons are probably obvious.

&lt;img src="image/toolbar-icons-1.png" width="20%" style="display: block; margin: auto;" /&gt;

.center[Figure 1. The first six toolbar's icons &lt;br/&gt;(New experiment&lt;sup&gt;1&lt;/sup&gt;, Open&lt;sup&gt;2&lt;/sup&gt;, Save&lt;sup&gt;3&lt;/sup&gt;, Save As&lt;sup&gt;4&lt;/sup&gt;, Undo&lt;sup&gt;5&lt;/sup&gt;, Redo&lt;sup&gt;6&lt;/sup&gt;)]
- For other icons, if you hover over, you get a tool tip telling you what each icon does.

&lt;img src="image/toolbar-icons-2.png" width="20%" style="display: block; margin: auto;" /&gt;

.center[Figure 2. The next six toolbar's icons &lt;br/&gt; (Monitor Setting&lt;sup&gt;7&lt;/sup&gt;, Experiment Setting&lt;sup&gt;8&lt;/sup&gt;, &lt;br/&gt;Compile to Python Script&lt;sup&gt;9&lt;/sup&gt;, Compile to JS Script&lt;sup&gt;10&lt;/sup&gt;, Send experiment to Runner&lt;sup&gt;11&lt;/sup&gt;, Run experiment&lt;sup&gt;12&lt;/sup&gt;)]
---


- The last five icons are new web icons. You will need these buttons to launch, sync, and run your projects in the Github. 

&lt;img src="image/toolbar-icons-3.png" width="20%" style="display: block; margin: auto;" /&gt;

.center[Figure 3. The last five toolbar's icons &lt;br/&gt; (Run the study online&lt;sup&gt;13&lt;/sup&gt;, Sync with web project&lt;sup&gt;14&lt;/sup&gt;, &lt;br/&gt;Find existing study online&lt;sup&gt;15&lt;/sup&gt;, Log in&lt;sup&gt;16&lt;/sup&gt;, View details of the project&lt;sup&gt;17&lt;/sup&gt;)]

Before you push your study online, you need to login to the Pavlovia. You can either login using the **Login** icon _or_  login using the `Pavlovia.org` tab

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/loginPavlovia.png" alt="Logging in on Pavlovia via the PsychoPy 3 Builder" width="35%" /&gt;
&lt;p class="caption"&gt;Logging in on Pavlovia via the PsychoPy 3 Builder&lt;/p&gt;
&lt;/div&gt;

---
layout: false

background-image: url("gif/pavlovia.gif")
background-position: center
background-size: contain

---
## Add New Routine

1. On the ***Flow*** window, select ` Insert Routine`  ‚û°Ô∏è `(new) ` 
2. A `New Routine` window will pop up. Enter a meaningful name for the new routine. Click üÜó .
3. Now you should see the Routine appears as tab on the ***Routines*** window.

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/add-new-routine.gif" alt="GIF for adding new routine" width="60%" /&gt;
&lt;p class="caption"&gt;GIF for adding new routine&lt;/p&gt;
&lt;/div&gt;

---
layout: true

## Add New Component

---

1. On the ***Components*** window, select the type of component that you want. 
Under `Favorites`, a few commonly used components are listed. 
2. They typically represent either stimuli (e.g. **Image** or **Text** Components), or methods of responding (e.g. **Mouse** or **Keyboard** Components)
3. Clicking on any of the components will result in a pop-up window. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/add-new-component.gif" alt="GIF for adding new component" width="50%" /&gt;
&lt;p class="caption"&gt;GIF for adding new component&lt;/p&gt;
&lt;/div&gt;
---

.left-column[
- PsychoPy is an open-source program, so the components are continuously being updated. 

- In the latest version **(v2021.2.2)**, 33 components are available (updated on 2021-08-12). [More details here.](https://www.psychopy.org/builder/components.html)
]

.right-column[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/component-type.png" alt="The library of the components available in the PsychoPy3 (v2020.2.10)&amp;lt;U+FE0F&amp;gt;" width="60%" /&gt;
&lt;p class="caption"&gt;The library of the components available in the PsychoPy3 (v2020.2.10)&lt;U+FE0F&gt;&lt;/p&gt;
&lt;/div&gt;
]
---
### Text

.pull-left[


&lt;div class="figure"&gt;
&lt;img src="image/text-component.png" alt="Pop-up window for text component" width="70%" /&gt;
&lt;p class="caption"&gt;Pop-up window for text component&lt;/p&gt;
&lt;/div&gt;

]

.pull-right[
***General***

1Ô∏è‚É£ __ name(string)__: The name should contain only letters, numbers and underscores (no punctuation marks or spaces).

2Ô∏è‚É£ __start__: The time that the stimulus should first appear.

3Ô∏è‚É£ __stop__: The duration for which the stimulus is presented.

7Ô∏è‚É£ __text__: Text to be shown
]
---
### Text

.pull-left[


&lt;div class="figure"&gt;
&lt;img src="image/text-component.png" alt="Pop-up window for text component" width="70%" /&gt;
&lt;p class="caption"&gt;Pop-up window for text component&lt;/p&gt;
&lt;/div&gt;
]

.pull-right[
***Appearance and Formatting***

4Ô∏è‚É£ **color**:The color of the text(right-click for more color)

5Ô∏è‚É£ __letter height__: The height of the characters in the given units of the stimulus/window.

6Ô∏è‚É£ __position__: [x, y] The position of the centre of the stimulus, in the units specified by the stimulus or window

***Static and non-static stimuli*** üò•

8Ô∏è‚É£ __Drop-down__: 
*Constant*: For static stimuli
*Set every repeat/ Set every frame*: For changing stimuli
]

???

Make sure that you explain "Static and non-static stimuli". 
---
### Text
.pull-left[

&lt;div class="figure"&gt;
&lt;img src="image/text-component-advanced.png" alt="Pop-up window for text component" width="70%" /&gt;
&lt;p class="caption"&gt;Pop-up window for text component&lt;/p&gt;
&lt;/div&gt;
]

.pull-right[

**Units for the window and stimuli**

1Ô∏è‚É£ __ Unit&lt;sup&gt;1&lt;/sup&gt;__

- **Height**: It is specified relative to the height of the window (note the window, not the screen). For a standard widescreen (16:10 aspect ratio) the bottom left of the screen is (-0.8,-0.5) and top-right is (+0.8,+0.5).
- **Norm**: In normalised (‚Äònorm‚Äô) units the window ranges in both x and y from -1 to +1. That is, the top right of the window has coordinates (1,1), the bottom left is (-1,-1). 
- **pix**: The sizes are specific to the monitor (because all monitors differ in pixel size). 

.footnote[
[1] See *Additional Materials* section or [*PsychoPy website*](https://www.psychopy.org/general/units.html) for more information.]

]
---
### Image
.pull-left[



&lt;div class="figure"&gt;
&lt;img src="image/image-component.png" alt="Pop-up window for image component" width="90%" /&gt;
&lt;p class="caption"&gt;Pop-up window for image component&lt;/p&gt;
&lt;/div&gt;
]

.pull-right[

The first three variables (`name`, `start`, `stop`) are the same. 

1Ô∏è‚É£ __Image__: Filename of the image formats (e.g. tif, jpg, bmp, png, etc.).

2Ô∏è‚É£ _Position__: [x, y] The position of the centre of the stimulus, in the units specified by the stimulus or window

3Ô∏è‚É£ __Size__: [x, y] The size of the stimulus in the given units of the stimulus/window. 

4Ô∏è‚É£ __Units__: Units deg, cm, pix, norm, or inherit from window
]
---
### Image
.pull-left[



&lt;div class="figure"&gt;
&lt;img src="image/image-component-advanced.png" alt="Pop-up window for image component" width="90%" /&gt;
&lt;p class="caption"&gt;Pop-up window for image component&lt;/p&gt;
&lt;/div&gt;
]

.pull-right[

The first three variables (`name`, `start`, `stop`) are the same. 

1Ô∏è‚É£ __color__: The color of the text(right-click for more color.

2Ô∏è‚É£ __Mask__: A filename to  define the shape (e.g. circle will make the patch circular) or something which overlays the patch

]
---
### Keyboard
.pull-left[



&lt;div class="figure"&gt;
&lt;img src="image/keyboard-component.png" alt="Pop-up window for keyboard component" width="90%" /&gt;
&lt;p class="caption"&gt;Pop-up window for keyboard component&lt;/p&gt;
&lt;/div&gt;
]

.pull-right[
1Ô∏è‚É£ __Force end of Routine__: If this box is checked then the_ Routine_ will end as soon as one of the allowed keys is pressed.

2Ô∏è‚É£ __Allowed keys__: A list of allowed keys

3Ô∏è‚É£ __Store__: Store either last key, first key, all keys, nothing. The response time will also be stored if a keypress is recorded. 

4Ô∏è‚É£ __Store correct__: Check this box if you wish to store whether or not this key press was correct.

5Ô∏è‚É£ __Correct Answer__: Defines what would constitute a correct answer e.g. left, 1 or  $corrAns 
]
---
layout: false

## Add New Loop in the Flow

- We use ***Flow*** to combine a few ***Routines*** into a single experiment.
- Loops control the repetition of Routines and the choice of stimulus parameters for each. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/add-new-loop.gif" alt="GIF for adding new loop" width="50%" /&gt;
&lt;p class="caption"&gt;GIF for adding new loop&lt;/p&gt;
&lt;/div&gt;

---
class: inverse, center, middle

# Getting Started &lt;br/&gt; &lt;br/&gt;(Designing Stroop Task)
---
layout: true

## Stroop Task

---

The Stroop effect is the finding that naming the color of the first set of words is easier and quicker than the second.

- In the figure shown below, the words corresponding to the colors ‚ÄúRed,‚Äù ‚ÄúGreen,‚Äù and ‚ÄúBlue‚Äù are included, but printed in colors that do not correspond to the word (e.g., the word ‚ÄúRed‚Äù is printed in blue). 

- The task is to name the ink color, inhibiting the reading of the word, and the score is the number of correctly named elements. 

&lt;br/&gt;
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/stroop.gif" alt="Stroop Task" width="40%" /&gt;
&lt;p class="caption"&gt;Stroop Task&lt;/p&gt;
&lt;/div&gt;
---
### Step 1: Download files needed

Download and unzip the file from [Github](https://github.com/sohmeiling/workshops_PsychoPy). Remember to save the folder in the Desktop 
(Warning!! Do not save the folder on a cloud-based storage such as OneDrive or Dropbox)

### Step 2: Open the PsychoPy3 Builder

In the unzipped folder, you should see multiple folders. Open the **.psyexp** file under the **practical-stroop** folder

Workshop_M_Connect  ‚û°Ô∏è practical-stroop  ‚û°Ô∏è stroop-test.psyexp

---
### Step 3: Create Stimuli

Before you create any experiment, it is important that you are familiar with the task. We designed our study based on the Stroop Color and Word Test (SCWT) in Rivera's et al. (2015) study.

There are three kinds of Stroop task: _Stroop Word_, _Stroop Color_, and _Stroop Word-Color_. We will start with _Stroop Word Task_.

&gt; _Stroop Word Task_. The words corresponding to the colors ‚ÄúRed,‚Äù ‚ÄúGreen,‚Äù and ‚ÄúBlue‚Äù are included, and all are printed in black ink. 


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/swct-ex.png" alt="Stroop Task" width="70%" /&gt;
&lt;p class="caption"&gt;Stroop Task&lt;/p&gt;
&lt;/div&gt;
---
### Step 3: Create Stimuli
We need to list out all the possible combinations of **Word Stroop**. 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; type &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; practiceWord &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; practiceColor &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; corrResponse &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; red &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; left &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; green &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; up &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blue &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; right &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

We have created the stimuli file for you. Please use the **wordPractice_stim.xlsx** for the following task. 

In the .xlsx file, there are _four_ variable names. 

- ***type***. The type of Stroop Task

- ***practiceWord***. The words presented on the screen

- ***practiceColor***. The colors of the words

- ***corrResponse***. The correct key responses/Answer

---
### Step 4: Create three routines

- Routine 1: Welcome Routine (name it "Welcome")
- Routine 2: Practice Routine (name it "Practice_Trial")
- Routine 3: End Routine (name it "End")

When it comes to naming the **Routine**, **variables**, and **Loop**, there are a few rules that you have to follow. For example, 
1.  Variables names must start with a letter or an underscore
2. The remainder of your variable name may consist of letters, numbers and underscores. Space is not allowed.
3. **Names are case sensitive**

For the purpose of this workshop, we have created the routines for you. You just need to click `Insert Routine` and arrange the routines in the **Flow** window, as shown in the figure below. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/stroop-add-routine.png" alt="Stroop Task" width="50%" /&gt;
&lt;p class="caption"&gt;Stroop Task&lt;/p&gt;
&lt;/div&gt;
---
### Step 5: Create components for each routine
#### Step 5.1: Create components for the Welcome routine
In the **Welcome** routine, create two components. 

- Component 1: A **Text** component (name it "welcome_text")
- Component 2: A **Keyboard** component (name it "welcome_resp")

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/welcome-routine.png" alt="Welcome Routine" width="60%" /&gt;
&lt;p class="caption"&gt;Welcome Routine&lt;/p&gt;
&lt;/div&gt;
---
#### Step 5.2: Properties of each component in the Welcome routine

Please refer to the images below and follow the number closely.

.pull-left[
&lt;div class="figure"&gt;
&lt;img src="image/welcome_text.png" alt="welcome_text component" width="65%" /&gt;
&lt;p class="caption"&gt;welcome_text component&lt;/p&gt;
&lt;/div&gt;

]

.pull-right[
&lt;div class="figure"&gt;
&lt;img src="image/welcome_resp.png" alt="welcome_resp component" width="80%" /&gt;
&lt;p class="caption"&gt;welcome_resp component&lt;/p&gt;
&lt;/div&gt;

]
---
#### Step 5.3: Create components for the Practice_Trial routine

In the **Practice_Trial** routine, create two components. 

- Component 1: A **Text** component (name it "stim_text")
- Component 2: A **Keyboard** component (name it "practice_resp")


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/practice_trial.png" alt="Practice_Trial Routine" width="60%" /&gt;
&lt;p class="caption"&gt;Practice_Trial Routine&lt;/p&gt;
&lt;/div&gt;
---
#### Step 5.4: Properties of each component in the Practice_Trial routine

Please refer to the images below and follow the number closely.

.pull-left[
&lt;div class="figure"&gt;
&lt;img src="image/stim_text.png" alt="stim_text component" width="65%" /&gt;
&lt;p class="caption"&gt;stim_text component&lt;/p&gt;
&lt;/div&gt;

]

.pull-right[
&lt;div class="figure"&gt;
&lt;img src="image/practice_resp.png" alt="practice_resp component" width="80%" /&gt;
&lt;p class="caption"&gt;practice_resp component&lt;/p&gt;
&lt;/div&gt;

]
---
#### Step 5.5: Create components for the End routine

In the **End** routine, create one component. 

- Component 1: A **Text** component (name it "end_text")


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/end-routine.png" alt="End routine" width="60%" /&gt;
&lt;p class="caption"&gt;End routine&lt;/p&gt;
&lt;/div&gt;
---
#### Step 5.6: Properties of the component in the End routine

Please refer to the images below and follow the number closely.

.pull-left[
&lt;div class="figure"&gt;
&lt;img src="image/end_text.png" alt="end_text component" width="65%" /&gt;
&lt;p class="caption"&gt;end_text component&lt;/p&gt;
&lt;/div&gt;

]
---
### Step 6: Create a loop in the Flow window

In the ***Flow*** window, `Insert loop` around the _Practice_Trial_ routine

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/practice_loop.png" alt="Insert Loop" width="80%" /&gt;
&lt;p class="caption"&gt;Insert Loop&lt;/p&gt;
&lt;/div&gt;

---
#### Step 6.1: Properties of the _practice_loop_

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/practice-loop-properties.png" alt="practice_loop properties" width="28%" /&gt;
&lt;p class="caption"&gt;practice_loop properties&lt;/p&gt;
&lt;/div&gt;

Note for 5Ô∏è‚É£. 

Make sure you are in the correct directory. If you follow earlier instruction and have saved your folder in the **Desktop**, then your filepath should be


```r
# Desktop\Workshop_M_Connect\Practical_Build_stroop\colorPractice_stim.xlsx
```

---
### Step 7: Save and run the study

- Make sure you consistently save your psyexp file as you program the study

- If you receive an error message, please approach the TAs in the chat. It will be helpful if you can copy and paste the error message into the chat. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/good-job.gif" alt="Well done!" width="20%" /&gt;
&lt;p class="caption"&gt;Well done!&lt;/p&gt;
&lt;/div&gt;

We will take a 10-minute break now. For those interested of customizing the study, please try out the practice tasks in the next two slides. 

---
layout: false

### Practice Time (5-10 minutes)

- In the **Welcome** routine, modify the `welcome_text` component. You might want to include a longer instruction for the Stroop task. For example, 

&gt; Welcome! This is a Stroop task. &lt;br/&gt; 
&gt; &lt;br/&gt; 
&gt; In this task, you are asked to respond to either the words or the colors printed in ‚ÄúRed,‚Äù ‚ÄúGreen,‚Äù and ‚ÄúBlue‚Äù. &lt;br/&gt; 
&gt; &lt;br/&gt; 
&gt; Select 'LEFT' for red, 'UP' for green, 'RIGHT' for blue. &lt;br/&gt; 
&gt; &lt;br/&gt; 
&gt; Press 'SPACE' to continue.

- In the `welcome_text` component, you can always change the color of the text. Please make sure that it follows the [accessibility code](https://www.washington.edu/accessibility/web/color/). 

- In the **Practice_Trial** routine, add another Text component to remind your participants about the keys' response. You will need to adjust the position of the text component. As we are using *height* as our unit, the range for [x, y] position is [-0.8 &lt;x &lt;0.8,  -0.5&lt;y&lt; 0.5]

&gt; Select 'LEFT' for red, 'UP' for green, 'RIGHT' for blue.

---
### Practice Time (5-10 minutes)

- In the **Experiment Settings**, add some demographic information such as age and gender to the _Experiment Info_.  

- Also, in the **Experiment Settings**, try to change the color of the screen. Now, it is set to grey. (Tips: under the Screen tab)

---
layout: true

## Stroop Task

---
### Step 8: Create the Trial routine

- The **Trial routine** is identical to the earlier **Practice_Trial** routine. 

- Now, your task is to create the components for the **Trial** routine. 
    1. Insert the **Trial** Routine
    2. Create a Text component
    3. Create a Keyboard component
    4. Insert a Loop. Use the _WordStimuli.xlsx_  file. 

- After you are done, try to run the experiment. 

--
- You should receive an error message if you follow the properties settings in  Step 5-6. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/error-msg.gif" alt="Arghhhh!!!! What happened?" width="20%" /&gt;
&lt;p class="caption"&gt;Arghhhh!!!! What happened?&lt;/p&gt;
&lt;/div&gt;

---
### Step 9: Understanding the error

.pull-left[
- First, look into the _WordStimuli.xlsx_  file.


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; type &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; word &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; color &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; answer &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; red &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; left &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; red &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; left &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blue &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; right &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blue &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; right &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; green &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; up &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Word &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; green &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; up &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[
- You should realize that the variables' names have changed. 


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; old_names &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; new_names &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; type &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; type &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; practiceWord &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; word &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; practiceColor &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; color &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; corrResponse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; answer &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
### Step 9: Understanding the error 
Now, make changes to the **Text** and **Keyboard** components. 

.pull-left[
First, 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/stim_text.png" alt="stim_text component" width="50%" /&gt;
&lt;p class="caption"&gt;stim_text component&lt;/p&gt;
&lt;/div&gt;
]

--
.pull-right[
Modify 3Ô∏è‚É£ and 6Ô∏è‚É£

]

---
### Step 9: Understanding the error 

--
.pull-left[
Next, 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/practice_resp.png" alt="practice_resp component" width="80%" /&gt;
&lt;p class="caption"&gt;practice_resp component&lt;/p&gt;
&lt;/div&gt;
]
--

.pull-right[
Modify 7Ô∏è‚É£
]

---
### Step 10: Counterbalancing

#### Blocking similar conditions 

Counterbalancing requires a bit of thinking! In our Stroop Task, we have three types of Stroop but if you look carefully, these three tasks are very similar. So, you should not create different Routines for different trials in your blocks (if at all possible). 

- Look at the .xlsx file for the **Practice_Trial** routine. We have created two .xlsx files for _Stroop word Practice_ routine and _Stroop Color Practice_ routine. Both _xlsx_ files have identical variable names. 

&lt;br/&gt;

.pull-left[
&lt;div class="figure"&gt;
&lt;img src="image/word-practice.png" alt="wordPractice_stim.xlsx" width="100%" /&gt;
&lt;p class="caption"&gt;wordPractice_stim.xlsx&lt;/p&gt;
&lt;/div&gt;

]

--
.pull-right[
&lt;div class="figure"&gt;
&lt;img src="image/color-practice.png" alt="colorPractice_stim.xlsx" width="80%" /&gt;
&lt;p class="caption"&gt;colorPractice_stim.xlsx&lt;/p&gt;
&lt;/div&gt;

]

---
### Step 10: Counterbalancing (Blocking similar conditions) 

--
We can collapse both files into a single ***Loop***. 

--
1. In the outer (blocks) loop you set up the conditions file to be conditions.xlsx which creates a variable practiceFile. 

2. Then, in the inner (trials) loop you set the conditions file not to be any file directly but simply $practiceFile. 

3. When PsychoPy starts the loop, it will find the current value of practiceFile and insert the appropriate thing, which will be the name of an conditions file and voila, we're done with counterbalancing. 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/conditions.png" alt="The conditions.xlsx file" width="30%" /&gt;
&lt;p class="caption"&gt;The conditions.xlsx file&lt;/p&gt;
&lt;/div&gt;

---
### Step 10: Counterbalancing (Blocking similar conditions)

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/counter-loop.png" alt="The Flow layout" width="60%" /&gt;
&lt;p class="caption"&gt;The Flow layout&lt;/p&gt;
&lt;/div&gt;

---
### Practice Time (5-10 minutes)

***Practice***

1. This time, you try to create a counterbalancing loop for the **Trial** routine. Use the conditions.xlsx file. 

2. Try to add instructions for your participants, informing them if the following trial is a Word Stroop, Color Stroop, or Word-color Stroop. 

---
### Step 11: Launch the study online

Before you push your study to Pavlovia, make sure that: 

1. You have login into your Pavlovia account. 
2. You have test-run the experiment and it works on PsychoPy. 
--

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="gif/push-to-pavlovia.gif" alt="GIF for launching online" width="50%" /&gt;
&lt;p class="caption"&gt;GIF for launching online&lt;/p&gt;
&lt;/div&gt;

---
layout: false

background-image: url("gif/pavlovia.gif")
background-position: center
background-size: contain

---
class: inverse, center, middle

# Additional Materials
---
layout: true

## Units and Scaling

---
- An important factor to consider when running online experiments is the standardization of stimuli size across participants who will likely be using different monitors. 

- To do so, we need to know a bit about the types of units in PsychoPy:

.center[![Experiment setting icon on the Toolbar](image/exp-setting.png)]

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="image/units-dropdown.png" alt="Drop-down list for units" width="30%" /&gt;
&lt;p class="caption"&gt;Drop-down list for units&lt;/p&gt;
&lt;/div&gt;

---
- **Height**

    - Everything is specified relative to the height of the window (note the window, not the screen)

- **Norm**

    - Everything is specified relative to the X, Y dimensions of the window (note the window, not the screen)

- **Cm**

    - Set the size and location of the stimulus in centimeters on the screen, can be verified by ‚Äúdrawing‚Äù a stimulus and measuring the dimensions to check that its indeed a square

- **Deg/DegFlat/DegFlatPos**

    - Use degrees of visual angle to set the size and location of the stimulus. Dependent on the distance that the participant sits from the screen as well as the screen itself

- **Pix**

    - Specify the size and location of your stimulus in pixels, Dependent on the pixel size of monitor

---
### Friendly Advice

üòâ We recommend sticking to **Height** and **Norm** units if your experiment is not too concerned with stimulus size. 

üòâ If stimulus size needs to be kept constant, then using **Cm, Deg, Pix** units is recommended as those do not scale with window size

---
### This is for the PRO ones

- Typically, we can standardize stimuli according to participants‚Äô window dimension by getting participants to compare a common real-world object with a standardized size on the screen (i.e. credit cards). 

- Scaling task allows the experiment to obtain the dimensions of the screen relative to each participant, and you can then use that information to scale your stimuli accordingly. 


.center[![The repository of an experiment on Pavlovia](image/screen-scale.png)]
.center[TIP: You can find many experimental templates like this on Pavlovia
]

---
background-image: url("image/wakefield-screen-scale.png")
background-position: center
background-size: contain

layout: false

---
layout: true

## Data Analysis

---

- Running experiments offline would store participants data locally on your hard drive. Using Pavlovia, participants data are stored in the cloud

- Data for **each** participant would be stored in an .csv file. If you have 50 participants, you will have 50 .csv files

- Usually, you would need to use some coding software (e.g. Python, R) to clean your data and aggregate them 

- For the purposes of this workshop, we will not go over how to clean/aggregate your data, rather, we will explore the kinds of raw data you can obtain

- At this stage, if your naming of your routines/components are not consistent or clear, you may have a very rough time understanding what‚Äôs going on. Particularly if you are collaborating with others, its very crucial to have simple naming rules.

---
### Explore your data file

- In your data file, there are some keywords that can help you identify the type of data being stored:


| variables' name | Description 
| :---: | :---: 
| .thisRepN/TrialN/N/Index | Counts how many stimuli/trials have passed
| .start/stopped | Counts the seconds when a stimulus is presented/stopped
| .keys | Logs the key press by the participants
| .rt | Logs the reaction time (seconds) taken to press a valid key(s)
| .corr | Logs the accuracy (1 = correct, 0 = wrong)


---
class: center, middle

# Thanks!

Slides created via the R packages:

[**xaringan**](https://github.com/yihui/xaringan)&lt;br&gt; 
[gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer)

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightSpans": true,
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
